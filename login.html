<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="صفحة تسجيل الدخول إلى نظام نقاط البيع لأولاد الخواص" />
    <meta name="keywords" content="تسجيل الدخول، أولاد الخواص، نقطة بيع" />
    <meta name="author" content="أولاد الخواص" />
    <meta name="theme-color" content="#1e40af" />
    <title>تسجيل الدخول | أولاد الخواص</title>
    <link rel="icon" type="image/svg+xml" href="images/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="images/icon-192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="images/icon-512.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="libs/fontawesome.min.css">
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at center, #1e293b, #0f172a);
            min-height: 100vh;
            padding: 1rem;
        }
        .login-card {
            width: 100%;
            max-width: 400px;
            text-align: center;
            padding: 2rem;
        }
        .login-logo {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 2rem;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* تحسينات للهواتف */
        @media (max-width: 768px) {
            body {
                padding: 0.5rem;
            }
            .login-card {
                padding: 1.5rem;
                margin: 0;
            }
            .login-logo {
                font-size: 2rem;
                margin-bottom: 1.5rem;
            }
            h2 {
                font-size: 1.25rem !important;
                margin-bottom: 1.5rem !important;
            }
            .input-group {
                margin-bottom: 1rem;
            }
            .input-group label {
                font-size: 0.9rem;
                margin-bottom: 0.4rem;
            }
            .input-group input {
                height: 45px;
                font-size: 1rem;
                padding: 0.75rem;
            }
            button[type="submit"] {
                height: 48px !important;
                font-size: 1rem !important;
                margin-top: 0.5rem;
            }
            .login-card p {
                font-size: 0.85rem !important;
            }
            .login-card > div {
                margin-top: 1.5rem !important;
                padding-top: 1.5rem !important;
            }
            .login-card > div p {
                font-size: 0.8rem !important;
            }
        }
        
        @media (max-width: 480px) {
            .login-card {
                padding: 1rem;
            }
            .login-logo {
                font-size: 1.75rem;
                margin-bottom: 1rem;
            }
            h2 {
                font-size: 1.1rem !important;
                margin-bottom: 1rem !important;
            }
        }
        
        /* تحسين التركيز على الحقول */
        .input-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 210, 255, 0.1);
        }
        
        /* منع التكبير التلقائي في iOS */
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            select,
            textarea,
            input {
                font-size: 16px !important;
            }
        }
    </style>
</head>
<body>
    <div class="login-card card animate-fade">
        <div class="login-logo"><i class="fas fa-faucet-drip"></i> أولاد الخواص</div>
        <h2 style="margin-bottom: 2rem;">تسجيل الدخول للنظام</h2>
        <form id="loginForm" autocomplete="off">
            <div class="input-group">
                <label>اسم المستخدم</label>
                <input type="text" id="username" name="username" required placeholder="ادخل اسم المستخدم" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false">
            </div>
            <div class="input-group">
                <label>كلمة المرور</label>
                <input type="password" id="password" name="password" required placeholder="••••••••" autocomplete="off">
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; height: 50px; font-size: 1.1rem;">
                <i class="fas fa-sign-in-alt"></i> دخول
            </button>
        </form>
        <p style="margin-top: 1.5rem; color: var(--text-gray); font-size: 0.9rem;">
            <strong>المديرين:</strong> mahmoud / 2707 أو mohamd / 1208<br>
            <strong>البائع:</strong> seller / 123 (المبيعات فقط)
        </p>
        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
            <p style="font-size: 0.85rem; color: var(--text-gray); margin: 0.5rem 0;">
                <strong>متجر:</strong> أولاد الخواص
            </p>
            <p style="font-size: 0.85rem; color: var(--text-gray); margin: 0.5rem 0;">
                <strong>الهاتف:</strong> 01154031550 - 01500272762
            </p>
        </div>
    </div>

    <script src="js/company-info.js"></script>
    <script src="js/initial_data.js"></script>
    <script src="js/data.js"></script>
    <script>
        document.getElementById('loginForm').onsubmit = (e) => {
            e.preventDefault();
            
            // إزالة المسافات الزائدة من البداية والنهاية
            const u = document.getElementById('username').value.trim();
            const p = document.getElementById('password').value.trim();
            
            // تحديث القيم في الحقول بعد إزالة المسافات
            document.getElementById('username').value = u;
            document.getElementById('password').value = p;
            
            console.log('Username:', u, 'Length:', u.length);
            console.log('Password:', p, 'Length:', p.length);
            
            // المديرين: محمد ومحمود
            if (u === 'mahmoud' && p === '2707') {
                const user = {
                    name: 'المهندس محمود صبري الخواص',
                    role: 'admin',
                    username: u
                };
                DB.setCurrentUser(user);
                DB.showToast('مرحباً بك يا مهندس محمود - مدير');
                setTimeout(() => location.href = 'dashboard.html', 1000);
            } else if (u === 'mohamd' && p === '1208') {
                const user = {
                    name: 'المهندس محمد صبري الخواص',
                    role: 'admin',
                    username: u
                };
                DB.setCurrentUser(user);
                DB.showToast('مرحباً بك يا مهندس محمد - مدير');
                setTimeout(() => location.href = 'dashboard.html', 1000);
            } else if (u === 'seller' && p === '123') {
                // البائع: صلاحية البيع فقط
                const user = {
                    name: 'البائع',
                    role: 'seller',
                    username: u
                };
                DB.setCurrentUser(user);
                DB.showToast('مرحباً - صلاحيات البيع فقط');
                setTimeout(() => location.href = 'index.html', 1000);
            } else {
                DB.showToast('اسم المستخدم أو كلمة المرور خطأ!', 'error');
                console.error('Login failed - Username or password incorrect');
            }
        };
        
        // منع المسافات أثناء الكتابة في حقل اسم المستخدم
        document.getElementById('username').addEventListener('input', function(e) {
            this.value = this.value.replace(/\s/g, '');
        });
        
        // منع المسافات أثناء الكتابة في حقل كلمة المرور
        document.getElementById('password').addEventListener('input', function(e) {
            this.value = this.value.replace(/\s/g, '');
        });
    </script>
</body>
</html>
