# نظام الصلاحيات - أولاد الخواص

## المستخدمون والصلاحيات

### 1️⃣ المديرون (صلاحيات كاملة)
- **المهندس محمود**: اسم المستخدم `mahmoud` - كلمة المرور `2707`
- **المهندس محمد**: اسم المستخدم `mohamd` - كلمة المرور `1208`

**الصلاحيات:**
- ✅ جميع الصفحات والميزات
- ✅ إدارة الأصناف والمنتجات
- ✅ المشتريات والموردين
- ✅ المصروفات والعملاء
- ✅ التقارير والأرباح
- ✅ المبيعات
- ✅ النسخ الاحتياطي والاستعادة
- ✅ عرض النواقص في المخزن

---

### 2️⃣ البائع (صلاحية البيع فقط)
- **البائع**: اسم المستخدم `seller` - كلمة المرور `123`

**الصلاحيات:**
- ✅ صفحة المبيعات (البيع فقط)
- ✅ لوحة التحكم (عرض فقط)
- ✅ طباعة الفواتير
- ✅ طباعة الباركود
- ❌ إدارة الأصناف
- ❌ المشتريات
- ❌ المصروفات
- ❌ الموردين والعملاء
- ❌ التقارير والأرباح
- ❌ النسخ الاحتياطي

---

## كيفية عمل النظام

### الحماية التلقائية
- عند محاولة البائع الدخول لصفحة محظورة، سيتم:
  - عرض رسالة "ليس لديك صلاحية للوصول لهذه الصفحة - البائع يبيع فقط"
  - إعادة التوجيه تلقائياً لصفحة المبيعات

### إخفاء الأزرار والروابط
- البائع لن يرى:
  - روابط الصفحات المحظورة في القائمة
  - أزرار النسخ الاحتياطي والاستعادة
  - زر النواقص في المخزن

---

## الملفات المعدلة

1. **js/data.js**: إضافة دوال التحقق من الصلاحيات
   - `isAdmin()`: التحقق من أن المستخدم مدير
   - `isSeller()`: التحقق من أن المستخدم بائع
   - `checkPermission()`: فحص الصلاحيات للصفحات

2. **js/permissions.js**: ملف جديد للحماية التلقائية
   - فحص الصلاحيات عند تحميل كل صفحة
   - إخفاء العناصر غير المسموحة

3. **login.html**: تحديث بيانات المستخدمين والأدوار

4. **جميع الصفحات الرئيسية**: إضافة سكريبت الصلاحيات

---

## التجربة

1. سجل دخول بحساب البائع: `seller` / `123`
2. لاحظ أن القائمة تحتوي فقط على المبيعات ولوحة التحكم
3. حاول الوصول لصفحة محظورة عبر كتابة الرابط مباشرة
4. سيتم منعك تلقائياً

---

## ملاحظات مهمة

- ✅ النظام يعمل تلقائياً بدون تدخل
- ✅ جميع الصفحات محمية
- ✅ البائع يمكنه البيع وطباعة الفواتير فقط
- ✅ المديرون لديهم صلاحيات كاملة
